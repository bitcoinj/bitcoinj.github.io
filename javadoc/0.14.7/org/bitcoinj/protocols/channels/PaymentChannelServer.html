<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PaymentChannelServer (bitcoinj 0.14.7 API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PaymentChannelServer (bitcoinj 0.14.7 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PaymentChannelServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelCloseException.CloseReason.html" title="enum in org.bitcoinj.protocols.channels"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/bitcoinj/protocols/channels/PaymentChannelServer.html" target="_top">Frames</a></li>
<li><a href="PaymentChannelServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.bitcoinj.protocols.channels</div>
<h2 title="Class PaymentChannelServer" class="title">Class PaymentChannelServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.bitcoinj.protocols.channels.PaymentChannelServer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PaymentChannelServer</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>A handler class which handles most of the complexity of creating a payment channel connection by providing a
 simple in/out interface which is provided with protobufs from the client and which generates protobufs which should
 be sent to the client.</p>

 <p>Does all required verification of messages and properly stores state objects in the wallet-attached
 <a href="../../../../org/bitcoinj/protocols/channels/StoredPaymentChannelServerStates.html" title="class in org.bitcoinj.protocols.channels"><code>StoredPaymentChannelServerStates</code></a> so that they are automatically closed when necessary and payment
 transactions are not lost if the application crashes before it unlocks.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a></span></code>
<div class="block">Implements the connection between this server and the client, providing an interface which allows messages to be
 sent to the client, requests for the connection to the client to be closed, and callbacks which occur when the
 channel is fully open or the client completes a payment.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#DEFAULT_MAX_TIME_WINDOW">DEFAULT_MAX_TIME_WINDOW</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#DEFAULT_MIN_TIME_WINDOW">DEFAULT_MIN_TIME_WINDOW</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#HARD_MIN_TIME_WINDOW">HARD_MIN_TIME_WINDOW</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReentrantLock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#lock">lock</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#maxTimeWindow">maxTimeWindow</a></span></code>
<div class="block">Maximum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#minTimeWindow">minTimeWindow</a></span></code>
<div class="block">Minimum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#SERVER_VERSIONS">SERVER_VERSIONS</a></span></code>
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#PaymentChannelServer-org.bitcoinj.core.TransactionBroadcaster-org.bitcoinj.wallet.Wallet-org.bitcoinj.core.Coin-long-long-org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection-">PaymentChannelServer</a></span>(<a href="../../../../org/bitcoinj/core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                    <a href="../../../../org/bitcoinj/wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                    <a href="../../../../org/bitcoinj/core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                    long&nbsp;minTimeWindow,
                    long&nbsp;maxTimeWindow,
                    <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code>
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#PaymentChannelServer-org.bitcoinj.core.TransactionBroadcaster-org.bitcoinj.wallet.Wallet-org.bitcoinj.core.Coin-org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection-">PaymentChannelServer</a></span>(<a href="../../../../org/bitcoinj/core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                    <a href="../../../../org/bitcoinj/wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                    <a href="../../../../org/bitcoinj/core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                    <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code>
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#close--">close</a></span>()</code>
<div class="block">Closes the connection by generating a settle message for the client and calls
 <code>ServerConnection#destroyConnection(CloseReason)</code>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#connectionClosed--">connectionClosed</a></span>()</code>
<div class="block">Called when the connection terminates.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#connectionOpen--">connectionOpen</a></span>()</code>
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#receiveMessage-org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage-">receiveMessage</a></span>(<a href="../../../../org/bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</code>
<div class="block">Called when a message is received from the client.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels">PaymentChannelServerState</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#state--">state</a></span>()</code>
<div class="block">Returns the underlying <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="lock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReentrantLock</a> lock</pre>
</li>
</ul>
<a name="SERVER_VERSIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SERVER_VERSIONS</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt; SERVER_VERSIONS</pre>
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</li>
</ul>
<a name="DEFAULT_MAX_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_TIME_WINDOW</h4>
<pre>public static final&nbsp;long DEFAULT_MAX_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.DEFAULT_MAX_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="maxTimeWindow">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxTimeWindow</h4>
<pre>protected final&nbsp;long maxTimeWindow</pre>
<div class="block">Maximum channel duration, in seconds, that the client can request. Defaults to 1 week.
 Note that the server needs to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
</li>
</ul>
<a name="DEFAULT_MIN_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MIN_TIME_WINDOW</h4>
<pre>public static final&nbsp;long DEFAULT_MIN_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.DEFAULT_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="HARD_MIN_TIME_WINDOW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HARD_MIN_TIME_WINDOW</h4>
<pre>public static final&nbsp;long HARD_MIN_TIME_WINDOW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.bitcoinj.protocols.channels.PaymentChannelServer.HARD_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="minTimeWindow">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>minTimeWindow</h4>
<pre>protected final&nbsp;long minTimeWindow</pre>
<div class="block">Minimum channel duration, in seconds, that the client can request. Should always be larger than  than 2 hours, defaults to 4 hours</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PaymentChannelServer-org.bitcoinj.core.TransactionBroadcaster-org.bitcoinj.wallet.Wallet-org.bitcoinj.core.Coin-org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PaymentChannelServer</h4>
<pre>public&nbsp;PaymentChannelServer(<a href="../../../../org/bitcoinj/core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                            <a href="../../../../org/bitcoinj/wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                            <a href="../../../../org/bitcoinj/core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                            <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</pre>
<div class="block">Creates a new server-side state manager which handles a single client connection. The server will only accept
 a channel with time window between 4 hours and 1 week. Note that the server need to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelClient.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
             the client and will close the connection on request)</dd>
</dl>
</li>
</ul>
<a name="PaymentChannelServer-org.bitcoinj.core.TransactionBroadcaster-org.bitcoinj.wallet.Wallet-org.bitcoinj.core.Coin-long-long-org.bitcoinj.protocols.channels.PaymentChannelServer.ServerConnection-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PaymentChannelServer</h4>
<pre>public&nbsp;PaymentChannelServer(<a href="../../../../org/bitcoinj/core/TransactionBroadcaster.html" title="interface in org.bitcoinj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
                            <a href="../../../../org/bitcoinj/wallet/Wallet.html" title="class in org.bitcoinj.wallet">Wallet</a>&nbsp;wallet,
                            <a href="../../../../org/bitcoinj/core/Coin.html" title="class in org.bitcoinj.core">Coin</a>&nbsp;minAcceptedChannelSize,
                            long&nbsp;minTimeWindow,
                            long&nbsp;maxTimeWindow,
                            <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</pre>
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelClient.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>minTimeWindow</code> - The minimum allowed channel time window in seconds, must be larger than 7200.</dd>
<dd><code>maxTimeWindow</code> - The maximum allowed channel time window in seconds. Note that the server need to be online for the whole time the channel is open.
                              Failure to do this could cause loss of all payments received on the channel.</dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
              the client and will close the connection on request)</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="state--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre><a href="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
public&nbsp;<a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels">PaymentChannelServerState</a>&nbsp;state()</pre>
<div class="block">Returns the underlying <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServerState.html" title="class in org.bitcoinj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated. This object allows
 you to learn how much money has been transferred, etc. May be null if the channel wasn't negotiated yet.</div>
</li>
</ul>
<a name="receiveMessage-org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveMessage</h4>
<pre>public&nbsp;void&nbsp;receiveMessage(<a href="../../../../org/bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</pre>
<div class="block">Called when a message is received from the client. Processes the given message and generates events based on its
 content.</div>
</li>
</ul>
<a name="connectionClosed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionClosed</h4>
<pre>public&nbsp;void&nbsp;connectionClosed()</pre>
<div class="block"><p>Called when the connection terminates. Notifies the <a href="../../../../org/bitcoinj/protocols/channels/StoredServerChannel.html" title="class in org.bitcoinj.protocols.channels"><code>StoredServerChannel</code></a> object that we can attempt to
 resume this channel in the future and stops generating messages for the client.</p>

 <p>Note that this <b>MUST</b> still be called even after either
 <code>ServerConnection#destroyConnection(CloseReason)</code> or
 <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#close--"><code>close()</code></a> is called to actually handle the connection close logic.</p></div>
</li>
</ul>
<a name="connectionOpen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionOpen</h4>
<pre>public&nbsp;void&nbsp;connectionOpen()</pre>
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><p>Closes the connection by generating a settle message for the client and calls
 <code>ServerConnection#destroyConnection(CloseReason)</code>. Note that this does not broadcast
 the payment transaction and the client may still resume the same channel if they reconnect</p>
 <p>
 <p>Note that <a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.html#connectionClosed--"><code>connectionClosed()</code></a> must still be called after the connection fully
 closes.</p></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PaymentChannelServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelCloseException.CloseReason.html" title="enum in org.bitcoinj.protocols.channels"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/bitcoinj/protocols/channels/PaymentChannelServer.ServerConnection.html" title="interface in org.bitcoinj.protocols.channels"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/bitcoinj/protocols/channels/PaymentChannelServer.html" target="_top">Frames</a></li>
<li><a href="PaymentChannelServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018. All rights reserved.</small></p>
</body>
</html>
